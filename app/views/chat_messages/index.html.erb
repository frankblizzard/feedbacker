<% title "Chat" %>  

<script type="text/javascript" charset="utf-8">
$(function() {  
  var faye = new Faye.Client('http://localhost:9292/faye');  
  faye.subscribe('/chat_messages/new', function (data) {  
    eval(data);  
  });    

});
</script>

<ul id="chat">  
  <%= render @messages %>  
</ul>  
  
<%= form_for ChatMessage.new, :remote => true do |f| %>  
  <%= f.text_field :content, :size => "54" %>  
  <%= f.hidden_field :user_id, :value => current_user.id %>
  <%= f.submit "Send" %>  

<% end %>